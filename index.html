<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=3.0,user-scalable=no">
    <meta name="referrer" content="no-referrer">
    <title>ICÓNICAS - Camisetas Retro</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --arcade-naranja: #d97706; --arcade-marron: #451a03; 
            --arcade-fondo: #fde68a; --arcade-pantalla: #134e4a; --texto: #451a03;
        }
        
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--arcade-fondo); color: var(--texto); overflow-x: hidden; }
        
        header { padding: 30px 20px; text-align: center; background: var(--arcade-marron); color: var(--arcade-fondo); border-bottom: 6px solid var(--arcade-naranja); }
        .header-main { display: flex; align-items: center; justify-content: center; gap: 15px; }
        .logo-img { width: 70px; height: 70px; object-fit: cover; border-radius: 50%; border: 3px solid var(--arcade-naranja); box-shadow: 3px 3px 0px rgba(0,0,0,0.3); }
        h1 { font-family: 'Bebas Neue'; font-size: clamp(2.5em, 7vw, 4.5em); margin: 0; text-shadow: 3px 3px 0px var(--arcade-naranja); }
        .subtitle { font-size: 0.85em; text-transform: uppercase; margin: 5px 0 25px; color: var(--arcade-naranja); font-weight: 700; }

        .controls-row { display: flex; justify-content: center; align-items: center; gap: 12px; max-width: 650px; margin: 0 auto; flex-wrap: wrap; padding: 0 15px; }
        #buscador { flex: 1; min-width: 180px; padding: 12px; border: 2px solid var(--arcade-naranja); background: var(--arcade-fondo); font-weight: 600; outline: none; box-shadow: 3px 3px 0px var(--arcade-naranja); }
        .btn-ig { background: var(--arcade-naranja); color: white; padding: 10px 15px; border-radius: 4px; text-decoration: none; font-weight: bold; border: 2px solid var(--arcade-naranja); box-shadow: 3px 3px 0px var(--arcade-marron); }

        .g { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
        .p { background: white; border-radius: 4px; padding: 15px; text-align: center; border: 3px solid var(--arcade-marron); box-shadow: 6px 6px 0px var(--arcade-marron); display: flex; flex-direction: column; justify-content: space-between; }
        
        .img-container { position: relative; width: 100%; height: 300px; background: #fff; margin-bottom: 15px; overflow: hidden; display: flex; align-items: center; justify-content: center; border: 1px solid #eee; cursor: zoom-in; }
        .img-container img { width: 100%; height: 100%; object-fit: contain; display: none; }
        .img-container img.active { display: block; }
        
        .nav-btn { position: absolute; top: 50%; transform: translateY(-50%); background: var(--arcade-marron); color: white; border: none; width: 40px; height: 40px; cursor: pointer; z-index: 5; border-radius: 50%; font-size: 20px; }
        .prev { left: 5px; } .next { right: 5px; }

        h3 { font-family: 'Bebas Neue'; font-size: 1.8em; margin: 10px 0; color: var(--arcade-marron); }
        .detalle-texto { margin: 0 0 10px; font-weight: bold; color: #555; font-size: 0.9em; }
        .v { color: var(--arcade-naranja); font-weight: 800; font-size: 1.6em; margin-bottom: 15px; display: block; }
        .btn-consultar { background: var(--arcade-pantalla); color: white; padding: 12px; text-decoration: none; font-weight: bold; border-bottom: 4px solid #06201f; display: block; }

        /* MODAL ZOOM */
        #zoom-modal { display: none; position: fixed; z-index: 30000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); touch-action: none; }
        #zoom-wrapper { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden; cursor: zoom-out; }
        #zoom-img { max-width: 95%; max-height: 95%; transition: transform 0.1s ease-out; transform-origin: center center; }
        .close-zoom { position: absolute; top: 20px; right: 20px; color: white; font-size: 50px; cursor: pointer; z-index: 30001; }

        footer { text-align: center; padding: 40px 20px; background: var(--arcade-marron); color: white; margin-top: 50px; }
        
        #form-modal { display: none; position: fixed; z-index: 40000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; }
        .form-content { background: var(--arcade-fondo); padding: 30px; border: 4px solid var(--arcade-naranja); width: 90%; max-width: 400px; text-align: center; }
        .btn-enviar { background: var(--arcade-naranja); color: white; border: none; width: 100%; padding: 15px; font-weight: bold; cursor: pointer; font-family: 'Bebas Neue'; font-size: 1.5em; }
    </style>
</head>
<body>

<header>
    <div class="header-main">
        <img src="https://i.ibb.co/1YgWVhth/Whats-App-Image-2026-01-29-at-16-31-41.jpg" alt="Logo" class="logo-img">
        <h1>CAMISETAS ICÓNICAS</h1>
    </div>
    <div class="subtitle">Indumentaria deportiva retro y actual</div>
    <div class="controls-row">
        <input type="text" id="buscador" placeholder="¿Qué equipo buscás?" onkeyup="filtrar()">
        <a href="https://instagram.com/iconicas.camisetas" target="_blank" class="btn-ig"><i class="fab fa-instagram"></i> INSTAGRAM</a>
    </div>
</header>

<div class="g" id="G">Cargando colección...</div>

<div id="zoom-modal">
    <span class="close-zoom" onclick="cerrarZoom()">&times;</span>
    <div id="zoom-wrapper" onclick="cerrarZoom()" onmousemove="ejecutarZoomPC(event)" ontouchmove="ejecutarZoomTouch(event)">
        <img id="zoom-img" src="" alt="Zoom">
    </div>
</div>

<div id="form-modal">
    <div class="form-content">
        <h2 style="font-family: 'Bebas Neue'; font-size: 2em; margin:0;">¿Querés tu web?</h2>
        <input type="text" id="nombre-form" placeholder="Tu Nombre" style="width:100%; padding:10px; margin:10px 0; border:2px solid var(--arcade-marron);">
        <button class="btn-enviar" onclick="enviarPropiaWeb()">SOLICITAR INFO</button>
        <p onclick="cerrarForm()" style="margin-top:15px; cursor:pointer; text-decoration: underline;">Cerrar</p>
    </div>
</div>

<footer>
    <p>CAMISETAS ICÓNICAS © 2026</p>
    <p onclick="abrirForm()" style="cursor:pointer; text-decoration: underline; font-size: 0.8em;">¿Te gusta esta página? Creá la tuya acá.</p>
</footer>

<script>
    const urlScript = "https://script.google.com/macros/s/AKfycbxDuP4hd8rIm8XRyXNanBfVl2P9SFn7Kzd4-fHuKVQGxyrwlsfJ4tDvYKiwSpeSw3GJtg/exec"; 
    const telWhatsApp = "543489484794";

    document.addEventListener('keydown', (e) => { if (e.key === "Escape") { cerrarZoom(); cerrarForm(); } });

    function abrirZoom(url) {
        const img = document.getElementById('zoom-img');
        img.src = url;
        img.style.transform = "scale(1)";
        document.getElementById('zoom-modal').style.display = 'block';
    }

    function cerrarZoom() { document.getElementById('zoom-modal').style.display = 'none'; }

    function ejecutarZoomPC(e) {
        const img = document.getElementById('zoom-img');
        const x = (e.offsetX / e.currentTarget.offsetWidth) * 100;
        const y = (e.offsetY / e.currentTarget.offsetHeight) * 100;
        img.style.transformOrigin = `${x}% ${y}%`;
        img.style.transform = "scale(2.5)";
    }

    function ejecutarZoomTouch(e) {
        if (e.touches.length > 1) return;
        e.preventDefault();
        const img = document.getElementById('zoom-img');
        const touch = e.touches[0];
        const rect = e.currentTarget.getBoundingClientRect();
        const xPercent = ((touch.clientX - rect.left) / rect.width) * 100;
        const yPercent = ((touch.clientY - rect.top) / rect.height) * 100;
        img.style.transformOrigin = `${xPercent}% ${yPercent}%`;
        img.style.transform = "scale(2.5)";
    }

    function handleImgError(img) {
        const originalUrl = img.src;
        if (!originalUrl.includes('images.weserv.nl')) {
            img.src = `https://images.weserv.nl/?url=${encodeURIComponent(originalUrl)}&we=1`;
        }
    }

    function mover(e, btn, d) {
        e.stopPropagation();
        const imgs = btn.parentElement.querySelectorAll('img');
        let idx = Array.from(imgs).findIndex(img => img.classList.contains('active'));
        imgs[idx].classList.remove('active');
        imgs[(idx + d + imgs.length) % imgs.length].classList.add('active');
    }

    async function cargar() {
        try {
            const res = await fetch(urlScript);
            const datos = await res.json();
            const h = document.getElementById('G');
            h.innerHTML = "";
            datos.lista.forEach(p => {
                // p.detalle = Columna C | p.img = Columna D
                const fotos = (p.img || "").split(',').filter(f => f.trim() !== "");
                let imgsHtml = fotos.map((f, i) => 
                    `<img src="${f.trim()}" class="${i===0?'active':''}" onerror="handleImgError(this)" onclick="abrirZoom(this.src)">`
                ).join('');
                let navHtml = fotos.length > 1 ? `<button class="nav-btn prev" onclick="mover(event, this, -1)">&#10094;</button><button class="nav-btn next" onclick="mover(event, this, 1)">&#10095;</button>` : '';
                
                h.innerHTML += `<div class="p">
                    <div class="img-container">${navHtml}${imgsHtml}</div>
                    <div>
                        <h3>${p.nombre || 'Camiseta'}</h3>
                        <p class="detalle-texto">${p.detalle || ''}</p>
                        <div class="v">$${p.precio ? parseInt(p.precio).toLocaleString() : '---'}</div>
                        <a href="https://wa.me/${telWhatsApp}?text=Consulta por: ${encodeURIComponent(p.nombre)} - ${p.detalle}" target="_blank" class="btn-consultar">Consultar</a>
                    </div>
                </div>`;
            });
        } catch (e) { document.getElementById('G').innerHTML = "Error al cargar datos."; }
    }

    function filtrar() {
        let val = document.getElementById('buscador').value.toLowerCase();
        document.querySelectorAll('.p').forEach(tarjeta => {
            tarjeta.style.display = tarjeta.innerText.toLowerCase().includes(val) ? "flex" : "none";
        });
    }

    function abrirForm() { document.getElementById('form-modal').style.display = 'flex'; }
    function cerrarForm() { document.getElementById('form-modal').style.display = 'none'; }
    function enviarPropiaWeb() {
        const nom = document.getElementById('nombre-form').value;
        window.open(`https://wa.me/543489541891?text=Hola, soy ${nom}. Quiero info por la web.`, '_blank');
        cerrarForm();
    }
    cargar();
</script>
</body>
</html>
